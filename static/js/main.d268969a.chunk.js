(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){"use strict";t.a={URL:"https://apif.uwinfotutor.me",ClassControl:"/v1/class",QueueWebSocket:"wss://apif.uwinfotutor.me/v1/queue",Student:"/v1/student",Queue:"/v1/queue",TeacherLogin:"/v1/teacher/login",Teacher:"/v1/teacher"}},122:function(e,t,a){e.exports=a.p+"static/media/TELabMap.a1bfce1d.png"},126:function(e,t,a){e.exports=a(260)},139:function(e,t,a){},140:function(e,t,a){},144:function(e,t,a){},152:function(e,t,a){},177:function(e,t){},179:function(e,t){},212:function(e,t){},213:function(e,t){},259:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(28),s=a.n(o),i=a(31),l=a(32),c=a(36),u=a(33),m=a(35),h=a(267),d=a(268),g=a(269),p=a(19),f=a.n(p),E=a(22),b=a(13),v=a.n(b),y=a(23),w=a(43),k=a(118);a(139);function x(e){var t=e.getPageNumber,a=e.prevStep,n=e.nextStep,o=e.totalPages;return r.a.createElement("div",{style:{width:"100%",margin:"auto",marginTop:40,textAlign:"center",zIndex:-5}},r.a.createElement(w.Grid,{fluid:!0},r.a.createElement(w.Row,null,r.a.createElement(w.Col,{style:{width:"50%"}},r.a.createElement(k.a,{disabled:t()<1,style:{backgroundColor:"#005696"},onClick:a},"< Back")),r.a.createElement(w.Col,{style:{width:"50%"}},r.a.createElement(k.a,{disabled:t()>o-2,style:{backgroundColor:"#005696"},onClick:n},"Next >")))))}var S=a(50),O=a(261),T=a(262),P=a(263),C=a(264);a(140);function L(e){var t=e.name,a=e.data,o=e.change,s=e.initText,i=e.value,l=Object(n.useState)(!1),c=Object(S.a)(l,2),u=c[0],m=c[1];return r.a.createElement(O.a,{name:t,isOpen:u,toggle:function(){m(!u)}},r.a.createElement(T.a,{caret:!0,style:{zIndex:500,backgroundColor:"#005696"}},i||s),r.a.createElement(P.a,{onChange:function(){console.log("asdf")},style:{zIndex:500}},a.map(function(e){return r.a.createElement(C.a,{key:e,onClick:function(){return o({target:{name:t,value:e}})},style:{cursor:"pointer"}},e)})))}var U=a(44),N=a.n(U),j=a(77),q=a(266),Q=a(270),A=(a(144),a(265)),F=a(10),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).removeMeFromQueue=Object(y.a)(v.a.mark(function e(){var t,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({removeButtonLoading:!0}),t=F.a.URL,n=F.a.Student,e.next=4,fetch(t+n+"/"+a.id,{method:"DELETE"});case 4:if(!((r=e.sent).status>=300)){e.next=11;break}return e.next=8,r.text();case 8:return o=e.sent,a.setError(o),e.abrupt("return");case 11:case"end":return e.stop()}},e)})),a.componentDidMount=Object(y.a)(v.a.mark(function e(){var t,n,r,o,s,i,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.URL,n=F.a.ClassControl,r=F.a.QueueWebSocket,e.prev=1,console.log("abc"),e.next=5,fetch(t+n);case 5:return o=e.sent,e.next=8,o.json();case 8:s=e.sent,i=s.map(function(e){return e.Code}),l={},s.forEach(function(e){var t=e.Code;l[t]=e.Type}),a.setState({classes:i,topics:l}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:a.queueSocket=new WebSocket("".concat(r,"?identification=").concat(a.id)),a.queueSocket.onopen=function(){console.log("Connected"),a.queueSocket.send("asdf")},a.queueSocket.onmessage=function(e){console.log(e);var t=e.data,n=JSON.parse(t);if(n){var r=n.position,o=n.queueLength;a.setState({inQueue:!0,queueLength:o,positionInQueue:r,sentDataOut:!1})}else a.setState({inQueue:!1,queueLength:0,positionInQueue:-1})};case 21:case"end":return e.stop()}},e,null,[[1,15]])})),a.componentWillUnmount=function(){a.queueSocket.close()},a.change=function(e){var t,n=e.target,r=n.name,o=n.value;"classNumber"===r&&o!==a.state.classNumber?a.setState((t={},Object(E.a)(t,r,o),Object(E.a)(t,"problemCategory",null),Object(E.a)(t,"problemDescription",""),t)):a.setState(Object(E.a)({},r,o))},a.getPageNumber=function(){return a.state.page},a.nextStep=function(){var e=a.state.page+1;e>a.totalPages-1&&(e=a.totalPages),a.setState({page:e}),e===a.totalPages-1&&a.checkValidityBeforeSendingRequest()},a.prevStep=function(){var e=a.state.page-1;e<0&&(e=0),a.setState({page:e})},a.setLocation=function(e){a.setState({location:e})},a.setValid=function(e){a.setState({valid:e})},a.sendData=Object(y.a)(v.a.mark(function e(){var t,n,r,o,s,i,l,c,u,m;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.checkValidityBeforeSendingRequest()){e.next=15;break}return console.log("abc"),t=a.state,n=t.name,r=t.classNumber,o=t.problemCategory,s=t.problemDescription,i=t.location,f.a.set("tutorqname",n),f.a.set("tutorqclassnumber",r.toString()),l=F.a.URL,c=F.a.Student,e.next=8,fetch(l+c,{method:"POST",body:JSON.stringify({id:a.id,name:n,class:r,topic:o,description:s,loc_x:i.xPercentage,loc_y:i.yPercentage}),headers:new Headers({"Content-Type":"application/json"})});case 8:if(!((u=e.sent).status>=300)){e.next=15;break}return e.next=12,u.text();case 12:return m=e.sent,a.setError(m),e.abrupt("return");case 15:case"end":return e.stop()}},e)})),a.state={page:0,name:f.a.get("tutorqname")||"",classNumber:f.a.get("tutorqclassnumber")?f.a.get("tutorqclassnumber"):null,problemCategory:null,problemDescription:"",location:null,error:"",valid:!1,queueLength:0,positionInQueue:-1,inQueue:!1,userInQueueKey:"",sentDataOut:!1,classes:[],topics:{}},a.totalPages=5,a.id=f.a.get("id"),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"setError",value:function(e){this.setState({error:e})}},{key:"checkValidityBeforeSendingRequest",value:function(){return""===this.state.name?(this.setError("Please provide a valid name"),this.setValid(!1),!1):null===this.state.classNumber?(this.setError("Invalid class number provided"),this.setValid(!1),!1):null===this.state.problemCategory?(this.setError("Please choose a problem category"),this.setValid(!1),!1):""===this.state.problemDescription?(this.setError("Please provide a description of the problem"),this.setValid(!1),!1):null===this.state.location?(this.setError("Please provide your location in the TE lab"),this.setValid(!1),!1):(this.setError(""),this.setValid(!0),!0)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.classNumber,n=e.page,o=e.problemCategory,s=e.problemDescription,i=e.location,l=e.error,c=e.valid,u=e.positionInQueue,m=e.queueLength,h=[];return h.push(i),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{margin:"auto",textAlign:"center"}},"QuestionQueue"),this.state.inQueue&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},r.a.createElement("h3",{style:{fontWeight:"bold"}},"You are currently in queue at position: ",r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},u,"/",m)),r.a.createElement("div",{style:{fontSize:"150%"}},r.a.createElement("p",null,"Please be patient, a tutor will assist you shortly."),r.a.createElement("p",null,"In the meantime, please check out the ",r.a.createElement(A.a,{to:"/blog/infotutor-home"},"Tutor Hub"),". Don't worry, your place in line will be saved!"),r.a.createElement("p",null,"If you would like to remove yourself from the queue, please click the button below:"),r.a.createElement(k.a,{style:{backgroundColor:"#005696"},onClick:this.removeMeFromQueue},"Remove me from queue")))),!this.state.inQueue&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},"Page ",n+1,"/",this.totalPages),r.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},0===n&&r.a.createElement(N.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Welcome to QuestionQueue!"),r.a.createElement("p",null,"This is an application used for the INFO tutor. Please have cookies enabled or the application will not function properly. Your data will be collected. See how it is being used ",r.a.createElement(A.a,{to:"/blog/tutordata"},"here"),"."),r.a.createElement("h3",null,"Please enter your name"),r.a.createElement(q.a,{placeholder:"Name",name:"name",onChange:this.change,value:t,style:{maxWidth:500,margin:"auto",marginTop:10}}))),1===n&&r.a.createElement(N.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Please select your class"),r.a.createElement(L,{change:this.change,name:"classNumber",data:this.state.classes,initText:"Choose a class",value:a}))),2===n&&r.a.createElement(N.a,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Please select a topic"),r.a.createElement(L,{change:this.change,name:"problemCategory",data:this.state.topics[a],initText:"Choose a topic",value:o}),r.a.createElement("h3",{style:{marginTop:15}},"Please describe your problem"),r.a.createElement(q.a,{placeholder:"Problem",name:"problemDescription",onChange:this.change,value:s,style:{maxWidth:500,margin:"auto",marginTop:30}})):r.a.createElement("h3",null,"Please select a class on the previous page")),3===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Where in the TE Lab are you sitting?"),r.a.createElement("div",null,r.a.createElement(j.a,{student:!0,setLocation:this.setLocation,locations:h,test:"123"}))),4===n&&r.a.createElement(N.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Submit"),""!==l&&r.a.createElement(Q.a,{color:"danger"},l),r.a.createElement(k.a,{style:{backgroundColor:"#005696"},disabled:!c,onClick:this.sendData},"Join the queue!"),r.a.createElement("p",{style:{marginTop:15}},"By clicking this button, you acknowledge that your data is collected. See how your data is being used ",r.a.createElement(A.a,{to:"/blog/tutordata"},"here"))))),r.a.createElement(x,{getPageNumber:this.getPageNumber,prevStep:this.prevStep,nextStep:this.nextStep,totalPages:this.totalPages})))}}]),t}(n.Component),z=(a(152),a(123)),D=a.n(z),R=a(72),B=a.n(R),W=function(){return r.a.createElement("div",null,r.a.createElement(D.a,{type:"Oval",color:"#005696",height:"100",width:"100"}))},V=B()({loader:function(){return a.e(3).then(a.bind(null,271))},loading:W}),H=B()({loader:function(){return a.e(4).then(a.bind(null,272))},loading:W}),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=Object(y.a)(v.a.mark(function e(){var t,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.authToken){e.next=3;break}return a.setState({loading:!1}),e.abrupt("return");case 3:return t=F.a.URL,n=F.a.Teacher,e.next=6,fetch(t+n+"/me",{headers:new Headers({Authorization:a.state.authToken})});case 6:if(!((r=e.sent).status>=300)){e.next=13;break}return alert("Unable to verify login. Logging out..."),localStorage.setItem("Authorization",""),a.setAuthToken(""),a.setUser(null),e.abrupt("return");case 13:return e.next=15,r.json();case 15:o=e.sent,a.setUser(o.state);case 17:case"end":return e.stop()}},e)})),a.setAuthToken=function(e){a.setState({authToken:e})},a.setUser=function(e){a.setState({user:e,admin:!!e&&e.admin,loading:!1})},a.signOut=Object(y.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.URL,n=F.a.TeacherLogin,e.next=3,fetch(t+n,{method:"DELETE",headers:new Headers({Authorization:a.state.authToken})});case 3:if(!(e.sent.status>=300)){e.next=7;break}return alert("Unable to sign out"),e.abrupt("return");case 7:a.setUser(null),a.setAuthToken(null);case 9:case"end":return e.stop()}},e)})),a.signIn=Object(y.a)(v.a.mark(function e(){var t,n,r,o,s,i,l,c,u,m;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.URL,n=F.a.TeacherLogin,r=a.state,o=r.loginEmail,s=r.loginPassword,i={email:o,password:s},e.next=5,fetch(t+n,{method:"POST",body:JSON.stringify(i),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((l=e.sent).status>=300)){e.next=12;break}return e.next=9,l.text();case 9:return c=e.sent,a.setError(c),e.abrupt("return");case 12:return u=l.headers.get("Authorization"),localStorage.setItem("Authorization",u),a.setError(""),a.setAuthToken(u),e.next=18,l.json();case 18:m=e.sent,a.setUser(m),a.setState({loginEmail:"",loginPassword:""});case 21:case"end":return e.stop()}},e)})),a.setError=function(e){a.setState({error:e})},a.signUp=Object(y.a)(v.a.mark(function e(){var t,n,r,o,s,i,l,c,u,m,h,d,g;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.URL,n=F.a.Teacher,r=a.state,o=r.signUpEmail,s=r.signUpPassword,i=r.signUpPasswordConf,l=r.signUpFirstName,c=r.signUpLastName,u={email:o,password:s,password_conf:i,first_name:l,last_name:c},e.next=5,fetch(t+n,{method:"POST",body:JSON.stringify(u),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((m=e.sent).status>=300)){e.next=12;break}return e.next=9,m.text();case 9:return h=e.sent,a.setError(h),e.abrupt("return");case 12:return d=m.headers.get("Authorization"),localStorage.setItem("Authorization",d),a.setError(""),a.setAuthToken(d),e.next=18,m.json();case 18:g=e.sent,a.setUser(g),a.setState({signUpEmail:"",signUpPassword:"",signUpPasswordConf:"",signUpFirstName:"",signUpLastName:""});case 21:case"end":return e.stop()}},e)})),a.change=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={authToken:localStorage.getItem("Authorization")||null,user:null,loading:!0,admin:!1,loginEmail:"",loginPassword:"",signUpEmail:"",signUpPassword:"",signUpPasswordConf:"",signUpFirstName:"",signUpLastName:""},a.adminButtons=[{linkTo:"/tutorqadmin/whosinqueue",linkText:"See Queue List"}],a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.user,o=t.admin,s={maxWidth:500,margin:"auto",marginTop:30};return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",{style:{marginBottom:"5vh"}},"QuestionQueue Admin Panel"),a&&r.a.createElement(W,null),!a&&!n&&r.a.createElement("div",null,r.a.createElement("h2",null,"Sign In"),r.a.createElement(q.a,{placeholder:"Email",name:"loginEmail",onChange:this.change,value:this.state.loginEmail,style:s}),r.a.createElement(q.a,{placeholder:"Password",name:"loginPassword",onChange:this.change,type:"password",value:this.state.loginPassword,style:s}),r.a.createElement(k.a,{onClick:function(){e.signIn()},style:{backgroundColor:"#005696",marginTop:10}},"Sign in"),r.a.createElement("div",{style:{marginBottom:20}}),r.a.createElement("h2",null,"Sign Up"),r.a.createElement(q.a,{placeholder:"Email",name:"signUpEmail",onChange:this.change,value:this.state.signUpEmail,style:s}),r.a.createElement(q.a,{placeholder:"Password",name:"signUpPassword",type:"password",onChange:this.change,value:this.state.signUpPassword,style:s}),r.a.createElement(q.a,{placeholder:"Password confirmation",name:"signUpPasswordConf",type:"password",onChange:this.change,value:this.state.signUpPasswordConf,style:s}),r.a.createElement(q.a,{placeholder:"First Name",name:"signUpFirstName",onChange:this.change,value:this.state.signUpFirstName,style:s}),r.a.createElement(q.a,{placeholder:"Last Name",name:"signUpLastName",onChange:this.change,value:this.state.signUpLastName,style:s}),r.a.createElement(k.a,{onClick:function(){e.signUp()},style:{backgroundColor:"#005696",marginTop:10}},"Sign up")),n&&o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{exact:!0,path:"/tutorqadmin",render:function(){return r.a.createElement(V,{adminButtons:e.adminButtons,signOut:e.signOut})}}),r.a.createElement(g.a,{path:"/tutorqadmin/whosinqueue",render:function(){return r.a.createElement(H,{id:e.id,uid:e.state.authToken})}})),n&&!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"You are not permitted to view this page."),r.a.createElement(k.a,{onClick:function(){e.signOut()}},"Sign out")))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:f.a.get("id")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:10}},r.a.createElement(h.a,null,r.a.createElement(d.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:function(){return r.a.createElement(I,null)}}),r.a.createElement(g.a,{path:"/tutorqadmin",component:function(){return r.a.createElement(J,{id:e})}}),r.a.createElement(g.a,{render:function(){return r.a.createElement("div",{style:{margin:20}},"Error: Page not found :(")}})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(125),Y=a.n(_);a(259);console.log("v1.0.0");var G=f.a.get("id");G||(G=Y.a.randomBytes(64).toString("hex"),f.a.set("id",G)),s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(50),r=a(1),o=a.n(r),s=a(120),i=a(121),l=a(122),c=a.n(l);function u(e){var t=e.locations,a=e.setLocation,l=e.student,u=Object(r.useState)({x:0,y:0,width:0,height:0,parentNodeOffsetLeft:0,parentNodeOffsetTop:0}),m=Object(n.a)(u,2),h=m[0],d=m[1],g=Object(r.useRef)(null),p=Object(r.useRef)(null);return Object(r.useEffect)(function(){var e=function(){if(g.current){var e=g.current,t=e.offsetLeft,a=e.offsetTop,n=e.width,r=e.height,o=e.parentNode,s=o.offsetLeft,i=o.offsetTop;d({x:t,y:a,width:n,height:r,parentNodeOffsetLeft:s,parentNodeOffsetTop:i})}};if(g.current&&0===h.x&&0===h.y||0===h.width||0===h.height||0===h.parentNodeOffsetLeft||0===h.parentNodeOffsetTop){var t=g.current,a=t.offsetLeft,n=t.offsetTop,r=t.width,o=t.height,s=t.parentNode,i=s.offsetLeft,l=s.offsetTop;d({x:a,y:n,width:r,height:o,parentNodeOffsetLeft:i,parentNodeOffsetTop:l})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),o.a.createElement("div",{ref:p,style:{position:"relative",height:"60%"}},o.a.createElement("img",{alt:"TE Lab Map. Please see one of the tutors if you need any accessibility accommodations and tutoring.",ref:g,src:c.a,style:{maxHeight:"50vh",maxWidth:"90vw",cursor:"pointer"},onClick:function(e){if(l&&a){var t=e.target,n=t.offsetLeft,r=t.offsetTop,o=t.width,s=t.height,i=e.target.parentNode.offsetLeft,c=e.target.parentNode.offsetTop,u={xPercentage:(e.pageX-n-i)/o,yPercentage:(e.pageY-r-c)/s};d({x:n,y:r,width:o,height:s,parentNodeOffsetLeft:i,parentNodeOffsetTop:c}),a(u)}}}),t&&t.map(function(e,t){return o.a.createElement("div",{key:"loc-"+t,style:{position:"absolute",left:h.x+(e?e.xPercentage*h.width:0),top:h.y+(e?e.yPercentage*h.height:0),transform:"translate(-50%, -50%)",display:e?"":"none"}},o.a.createElement(s.a,{icon:i.a,size:"2x",style:{color:"red"}}))}))}}},[[126,1,2]]]);
//# sourceMappingURL=main.d268969a.chunk.js.map